(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-77ce4655"],{"0c8f":function(t,a,e){},"2f14":function(t,a,e){"use strict";e.d(a,"a",(function(){return n}));e("99af"),e("fb6a");var i=e("d4ec"),r=e("bee2"),s=function(){function t(){Object(i["a"])(this,t)}return Object(r["a"])(t,[{key:"queryString",value:function(t){var a="";for(var e in t)a+="".concat(e,"=").concat(t[e],"&");return a.slice(0,-1)}}]),t}(),n=new s},"99af":function(t,a,e){"use strict";var i=e("23e7"),r=e("d039"),s=e("e8b5"),n=e("861d"),o=e("7b0b"),c=e("50c4"),d=e("8418"),l=e("65f0"),u=e("1dde"),f=e("b622"),v=e("2d00"),p=f("isConcatSpreadable"),g=9007199254740991,h="Maximum allowed index exceeded",m=v>=51||!r((function(){var t=[];return t[p]=!1,t.concat()[0]!==t})),b=u("concat"),C=function(t){if(!n(t))return!1;var a=t[p];return void 0!==a?!!a:s(t)},x=!m||!b;i({target:"Array",proto:!0,forced:x},{concat:function(t){var a,e,i,r,s,n=o(this),u=l(n,0),f=0;for(a=-1,i=arguments.length;a<i;a++)if(s=-1===a?n:arguments[a],C(s)){if(r=c(s.length),f+r>g)throw TypeError(h);for(e=0;e<r;e++,f++)e in s&&d(u,f,s[e])}else{if(f>=g)throw TypeError(h);d(u,f++,s)}return u.length=f,u}})},a434:function(t,a,e){"use strict";var i=e("23e7"),r=e("23cb"),s=e("a691"),n=e("50c4"),o=e("7b0b"),c=e("65f0"),d=e("8418"),l=e("1dde"),u=e("ae40"),f=l("splice"),v=u("splice",{ACCESSORS:!0,0:0,1:2}),p=Math.max,g=Math.min,h=9007199254740991,m="Maximum allowed length exceeded";i({target:"Array",proto:!0,forced:!f||!v},{splice:function(t,a){var e,i,l,u,f,v,b=o(this),C=n(b.length),x=r(t,C),y=arguments.length;if(0===y?e=i=0:1===y?(e=0,i=C-x):(e=y-2,i=g(p(s(a),0),C-x)),C+e-i>h)throw TypeError(m);for(l=c(b,i),u=0;u<i;u++)f=x+u,f in b&&d(l,u,b[f]);if(l.length=i,e<i){for(u=x;u<C-i;u++)f=u+i,v=u+e,f in b?b[v]=b[f]:delete b[v];for(u=C;u>C-i+e;u--)delete b[u-1]}else if(e>i)for(u=C-i;u>x;u--)f=u+i-1,v=u+e-1,f in b?b[v]=b[f]:delete b[v];for(u=0;u<e;u++)b[u+x]=arguments[u+2];return b.length=C-i+e,l}})},a596:function(t,a,e){t.exports=e.p+"img/coffee_icon.1c40a5a6.jpg"},a92a:function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"CheckOrder"},[i("div",{staticClass:"or-nav"},[i("van-nav-bar",{attrs:{fixed:!0},scopedSlots:t._u([{key:"left",fn:function(){return[i("div",{staticClass:"left-text"},[i("div",{staticClass:"logo"},[i("img",{staticClass:"auto-img",attrs:{src:e("a596"),alt:""}})]),i("div",{staticClass:"logo-title"},[t._v("Luckin Coffee")])])]},proxy:!0},{key:"right",fn:function(){return[i("div",{staticClass:"right-text",on:{click:t.back}},[t._v(" 返回 ")])]},proxy:!0}])})],1),i("div",{staticClass:"or-tab"},[i("div",{staticClass:"or-tab-box"},[i("van-tabs",{attrs:{color:"#212572","line-height":"2px"},on:{change:t.toggleStatus},model:{value:t.tabIndex,callback:function(a){t.tabIndex=a},expression:"tabIndex"}},t._l(t.tabItems,(function(a,e){return i("van-tab",{key:e,attrs:{title:a.title}},t._l(t.orderDatas,(function(a,e){return i("div",{key:e,staticClass:"tab-box"},[i("div",{staticClass:"clearfix tab-item-box"},[i("div",{staticClass:"fl or-Number"},[t._v(t._s(a.orderId))]),i("div",{staticClass:"fr status-delect"},[1==a.status?i("div",{staticClass:"or-status",on:{click:function(i){return t.confirmReceive(a,e)}}},[t._v("确认收货")]):i("div",{staticClass:"finished"},[i("div",{staticClass:"or-status"},[t._v("已完成")]),i("div",{staticClass:"or-delete",on:{click:function(i){return t.removeOrder(a.orderId,e)}}},[i("van-icon",{attrs:{name:"delete"}})],1)])])]),t._l(a.products,(function(a,e){return i("div",{key:e,staticClass:"bag-product"},[i("van-swipe-cell",[i("van-cell",{attrs:{border:!1}},[i("div",{staticClass:"clearfix"},[i("div",{staticClass:"fl pro-img"},[i("img",{staticClass:"auto-img",attrs:{src:a.smallImg,alt:""}})]),i("div",{staticClass:"fl pro-info"},[i("div",{staticClass:"text-box"},[i("div",{staticClass:"clearfix nameAndRule"},[i("div",{staticClass:"fl text-name"},[t._v(t._s(a.name))]),i("div",{staticClass:"fl text-rule"},[t._v(t._s(a.rule))])]),i("div",{staticClass:"text-enname"},[t._v(t._s(a.enname))])]),i("div",{staticClass:"price-box clearfix"},[i("div",{staticClass:"price fl"},[t._v("￥"+t._s(a.price))]),i("div",{staticClass:"count fr"},[t._v(" x "+t._s(a.count)+" ")])])])])])],1)],1)})),i("div",{staticClass:"order-price"},[i("div",{staticClass:"clearfix order-price-box"},[i("div",{staticClass:"date"},[t._v(t._s(t._f("formatDate")(a.date,"yyyy-MM-dd hh:mm:ss")))]),i("div",{staticClass:"fl pro-count"},[t._v("共计"+t._s(a.count)+"件商品")]),i("div",{staticClass:"fr pro-total"},[t._v("合计￥"+t._s(a.total))])])])],2)})),0)})),1)],1)]),i("div",{staticClass:"Empty"},[t.orderDatas.length<=0?i("van-empty",{attrs:{description:"订单空空如也",image:t.carimgurls}},[i("van-button",{staticClass:"bottom-button",attrs:{round:""},on:{click:t.goMenu}},[t._v(" 快去选购你喜欢的商品吧 ")])],1):t._e()],1)])},r=[],s=(e("d81d"),e("a434"),e("0c8f"),e("2f14")),n={data:function(){return{n:"2020-08-15T10:29:26.000Z",tabIndex:0,orderDatas:[],carimgurls:"https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=3561565621,665011732&fm=26&gp=0.jpg",tabItems:[{title:"全部"},{title:"进行中"},{title:"已完成"}]}},created:function(){this.getOrderData(0)},methods:{back:function(){this.$router.push({name:"My"})},goMenu:function(){this.$router.push({name:"Menu"})},getOrderData:function(t){var a=this,e=localStorage.getItem("RETK");e&&(this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0,loadingType:"spinner"}),this.axios({method:"GET",url:"/findOrder",params:{appkey:this.appkey,tokenString:e,status:t}}).then((function(t){if(a.orderDatas=[],a.$toast.clear(),7e4==t.data.code){var e={};for(var i in t.data.result.map((function(t){e[t.oid]?(e[t.oid].count+=t.count,e[t.oid].total+=t.count*t.price,e[t.oid].products.push(t)):e[t.oid]={orderId:t.oid,date:t.createdAt,count:t.count,total:t.count*t.price,products:[t],status:t.status}})),e)a.orderDatas.push(e[i]);a.orderDatas.sort((function(t,a){return new Date(a.date).getTime()-new Date(t.date).getTime()}))}})).catch((function(t){a.$toast.clear()})))},toggleStatus:function(t){this.getOrderData(t)},confirmReceive:function(t,a){var e=this,i=localStorage.getItem("RETK");if(i){var r=s["a"].queryString({appkey:this.appkey,tokenString:i,oid:t.orderId});this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0,loadingType:"spinner"}),this.axios({method:"POST",url:"/receive",data:r}).then((function(i){e.$toast.clear(),8e4==i.data.code&&(e.$toast(i.data.msg),1==e.tabIndex?e.orderDatas.splice(a,1):t.status=2)})).catch((function(t){e.$toast.clear()}))}},removeOrder:function(t,a){var e=this,i=localStorage.getItem("RETK");if(i){var r=s["a"].queryString({appkey:this.appkey,tokenString:i,oid:t});this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0,loadingType:"spinner"}),this.axios({method:"POST",url:"/removeOrder",data:r}).then((function(t){e.$toast.clear(),9e4==t.data.code&&(e.$toast(t.data.msg),e.orderDatas.splice(a,1))})).catch((function(t){e.$toast.clear()}))}}}},o=n,c=e("2877"),d=Object(c["a"])(o,i,r,!1,null,null,null);a["default"]=d.exports},bee2:function(t,a,e){"use strict";function i(t,a){for(var e=0;e<a.length;e++){var i=a[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t,a,e){return a&&i(t.prototype,a),e&&i(t,e),t}e.d(a,"a",(function(){return r}))},d4ec:function(t,a,e){"use strict";function i(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}e.d(a,"a",(function(){return i}))},d81d:function(t,a,e){"use strict";var i=e("23e7"),r=e("b727").map,s=e("1dde"),n=e("ae40"),o=s("map"),c=n("map");i({target:"Array",proto:!0,forced:!o||!c},{map:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=chunk-77ce4655.5748a66a.js.map